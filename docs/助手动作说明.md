# 助手动作说明（最小可用版本）

本说明列出当前助手面板已接入或可触发的主要动作、触发话术示例、以及后端接口链路，便于产品/测试同学快速验证。

## 动作清单

- 分类记账（文本/图片）
  - 触发话术：
    - 文本类：“帮我解析这条账单：微信支付超市 ¥24.50 2024-06-12 18:30”
    - 图片类：“识别这张小票并分类”
  - 后端链路：
    - 文本：`/api/v1/ai/chat`（系统提示工程约束输出 JSON），前端直连封装 `classifyTextQuick`
    - 图片：`/api/v1/accounting/classify`（multer + OCR + 分类，后端已接）
  - 结果落地：
    - 解析出 `amount`、`merchant`、`ts`、`categories[]` 后，前端提供“一键去新增交易”跳转并预填

- 消费洞察与解读
  - 触发话术：“总结我近30天的消费重点”“有没有节省建议？”
  - 后端链路：`GET /api/v1/analysis/insights`（后端先算，必要时 AI补全）
  - 结果落地：消费分析页展示摘要与建议

- 规划方案生成与采纳
  - 触发话术：“给我一个三个月攒 5000 的计划”
  - 后端链路：`POST /api/v1/plan/generate` → 结果可 `POST /api/v1/plans` 采纳
  - 结果落地：规划页显示方案卡片，可一键采纳

- 产品推荐与风险测评
  - 触发话术：“1万元 180天 有什么合适的产品？”“先做个风险测评”
  - 后端链路：
    - 推荐：`GET /api/v1/products/recommend?budget&termDays&riskPreference`
    - 测评：`POST /api/v1/risk/assessment/start` → `.../submit` → `.../result`
  - 结果落地：产品页“为你推荐”，详情页收益测算；测评结果影响提示/筛选

## 标准输出结构（分类记账）

统一结构 `AccountingClassifyResponse`：

```json
{
  "ocr": [{ "text": "...", "bbox": [0,0,0,0] }],
  "categories": [{ "label": "餐饮", "score": 0.93 }],
  "amount": 24.5,
  "merchant": "沃尔玛",
  "ts": "2024-06-12T18:30:00.000Z"
}
```

文本快速分类通过系统提示工程要求 LLM 严格输出该 JSON（避免多余前缀/解释）。

## 话术提示（可复制）

- “解析这段账单文本并输出 JSON，不要加解释：\n微信支付 沃尔玛 24.50 元 2024-06-12 18:30 餐饮”
- “生成三条节省建议，基于我最近支出结构，限 50 字每条”
- “以 10000 元预算、180 天期限、风险偏好中等做产品推荐，输出简述理由”

## 注意事项

- 合规：AI 生成内容仅供参考，不构成投资建议；产品信息以机构披露为准；上传前请脱敏或使用内置脱敏功能。
- 限流：AI/重处理接口有独立限流，异常时前端应提示“稍后再试/使用本地回退”。
- 稳定性：文本分类前端已做 JSON 解析容错（去除代码块围栏等）。
