## 测试环境后端部署与 PM2 管理速查

[返回文档索引](索引.md) · [查看部署手册](deploy-bt-panel.md) · [查看后端接口](backend-api.md)

### 1. 切到测试后端目录

```bash
cd /www/wwwroot/finapp-test/server
```

### 2. 安装依赖与 Prisma 迁移

```bash
# 全量安装依赖（包含 devDependencies），以便生成 Prisma Client
pnpm install

# 生成 Prisma Client
pnpm prisma generate

# 执行数据库迁移（根据已有迁移部署结构）
pnpm prisma migrate deploy
```

### 3. 使用 PM2 启动/管理测试后端

```bash
# 启动（依赖同目录下已配置好的 ecosystem.config.cjs）
pm2 start ecosystem.config.cjs

# 查看所有进程
pm2 ls

# 按名字删除进程
pm2 delete app-backend
pm2 delete app-backend-test

# 或者按 id 删除（第一列数字）
pm2 delete 0

# 删除/调整后保存当前进程列表为开机自启
pm2 save
```
